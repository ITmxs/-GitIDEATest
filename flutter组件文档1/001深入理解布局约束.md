# 深入理解 Flutter 布局约束



我们会经常听到一些开发者在学习 Flutter 时的疑惑：为什么我设置了 `width:100`，但是看上去却不是 100 像素宽呢。（注意，本文中的“像素”均指的是逻辑像素）通常你会回答，将这个 Widget 放进 `Center` 中，对吧？

**别这么干。**

**Don’t do that.**

如果你这样做了，他们会不断找你询问这样的问题：为什么 `FittedBox` 又不起作用了？为什么 `Column` 又溢出边界，亦或是 `IntrinsicWidth` 应该做什么。

其实我们首先应该做的，是告诉他们 Flutter 的布局方式与 HTML 的布局差异相当大（这些开发者很可能是 Web 开发），然后要让他们熟记这条规则：

**首先，上层 widget 向下层 widget 传递约束条件；**
**然后，下层 widget 向上层 widget 传递大小信息。**
**最后，上层 widget 决定下层 widget 的位置**。

如果我们在开发时无法熟练运用这条规则，在布局时就不能完全理解其原理，所以越早掌握这条规则越好！

更多细节：

- Widget 会通过它的 **父级** 获得自身的约束。约束实际上就是 4 个浮点类型的集合：最大/最小宽度，以及最大/最小高度。
- 然后，这个 widget 将会逐个遍历它的 **children** 列表。向子级传递 **约束**（子级之间的约束可能会有所不同），然后询问它的每一个子级需要用于布局的大小。
- 然后，这个 widget 就会对它子级的 **children** 逐个进行布局。（水平方向是 `x` 轴，竖直是 `y` 轴）
- 最后，widget 将会把它的大小信息向上传递至父 widget（包括其原始约束条件）。

